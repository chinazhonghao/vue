<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>组件事件流测试</title>
  <script src="../vue.bundle.js"></script>
</head>

<body>
  <div id="el">
    这里是父组件{{ name }}
    <child :count="num"></child>
    <button @click="updateNum">{{num}}</button>
  </div>
  <div id="event" style="margin-top: 15px;">
    <div>这里是事件顺序：</div>
    <div v-for="(item, index) in events">{{ item }}</div>
    <div>{{ count }}</div>
  </div>
  <script>
    // const events = new Vue({
    //   el: '', data: { events: [], count: 0 }, created() {
    //     console.log(this.count);
    //     // setInterval(() => {
    //     //   this.count++;
    //     // }, 1000);
    //   },
    // });
    const createHooks = (name) => ({
      beforeCreate() { console.log((`${name} beforeCreate`)); },
      created() { console.log((`${name} created`)); },
      beforeMount() { console.log((`${name} beforeMount`)); },
      mounted() { console.log((`${name} mounted`)); },
      beforeUpdate() { console.log((`${name} beforeUpdate`)); },
      updated() { console.log((`${name} updated`)); },
    });
    Vue.component('child', {
      ...createHooks('child'), 
      template: '<div>这里是子组件<div @click="add">增加: {{value}} {{count}}</div></div>',
      props: {
        count: Number,
      },
      data() {
        return {
          value: 0,
        };
      },
      methods: {
        add() {
          this.value += 1;
        },
      }
    });
    // Vue.component('child2', { 
    //   //...createHooks('child2'), 
    //   template: '<div>这里是子子组件</div>' });
    var vm = new Vue({
      el: '#el', 
      ...createHooks('parent'),
      data() { return { name: 'parent', num: 0 }; },
      methods: {
        updateNum() {
          this.num++;
        },
      },
    });
  </script>
</body>

</html>